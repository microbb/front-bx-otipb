!function(e){var t={};function s(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);class n extends class{accept(e){return e(this),this}}{constructor(e){let{modalSelector:t=null,modalGroup:s="[data-sumbiot-modal]",closeSelector:n="[data-sumbiot-modal-close]",closeClickOverlay:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this._trigger=e,this.modal=document.querySelector(t||document.querySelector(e).dataset.sumbiotTarget),this._close=this.modal.querySelector(n),this._modalGroupSelector=s,this._windows=document.querySelectorAll(s),this._closeClickOverlay=o,this._init()}_init(){this.hideAllModals(),this._showHandler(),this._closeHandler()}hideAllModals(){this._windows.forEach(e=>{e.classList.add("animated","fadeIn"),e.style.display="none"})}_showHandler(){document.addEventListener("click",e=>{const t=e.target;(t&&t.classList.contains(this._trigger.slice(1))||t&&t.parentElement.classList.contains(this._trigger.slice(1)))&&(e.preventDefault(),e.stopPropagation(),this._show(),setTimeout(()=>{t.blur()},150))})}_show(){this.hideAllModals(),this.modal.style.display="block"}_closeHandler(){this._close.addEventListener("click",e=>{e.target&&(e.preventDefault(),this._closeModal())}),this.modal.addEventListener("click",e=>{e.target&&(e.stopPropagation(),this._closeModalOverlay(e))}),window.addEventListener("keydown",e=>{"Escape"!==e.key&&27!==e.keyCode||this._closeModalEscape(e)})}_closeModal(){this.modal.style.display="none"}_closeModalEscape(e){document.querySelectorAll(this._modalGroupSelector).forEach(e=>{"block"===e.style.display&&(e.style.display="none")})}_closeModalOverlay(e){e.target===this.modal&&this._closeClickOverlay&&(this.modal.style.display="none")}}class o extends n{static createInput(){const e=document.createElement("input");return e.classList.add("sumbiot-input-dynamic"),e.setAttribute("type","hidden"),e.setAttribute("name","ID"),e}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this._wrapperModalSelector=t.modalWrapper||".sumbiot-wrapper",this._wrapperElementSelector=t.elementWrapper||"[data-sumbiot-wrapper]",this._existsElementForPasteIdSelector=t.existsElementForPasteId}_showHandler(){document.addEventListener("click",e=>{const t=e.target;t&&t.classList.contains(this._trigger.slice(1))?(e.preventDefault(),this._triggerEvent=t,this._show()):t&&t.parentElement.classList.contains(this._trigger.slice(1))&&(e.preventDefault(),this._triggerEvent=t.parentElement,this._show())},!0)}_show(){this.hideAllModals(),this._modalPosition(),this.modal.style.display="block"}_modalPosition(){this._elementPosition(),this._triggerEvent.closest(this._wrapperModalSelector)||this._triggerEvent.parentElement.classList.add(this._wrapperModalSelector.slice(1)),this._wpapper=this._triggerEvent.closest(this._wrapperModalSelector),this._wpapper.append(this.modal)}_elementPosition(){let e=this._triggerEvent.dataset.id,t=this.modal.querySelector(this._existsElementForPasteIdSelector||".sumbiot-input-dynamic");t||(t=o.createInput(),this.modal.querySelector(this._wrapperElementSelector)?this.modal.querySelector(this._wrapperElementSelector).prepend(t):this.modal.querySelector("form").prepend(t)),this._existsElementForPasteIdSelector?t.setAttribute("data-sumbiot-id",e):t.setAttribute("value",e)}}class i extends class{accept(e){return e(this),this}}{constructor(e){let{headActive:t=null,contentActive:s=null,display:n="block",hideOpen:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this._triggerSelector=e,this._headActive=t||"sumbiot-accordion-head",this._contentActive=s||"sumbiot-accordion-content",this._display=n,this._hideOpen=o,this._init()}_init(){this._toggleHandler()}_toggleHandler(){document.addEventListener("click",e=>{const t=e.target;if(t&&t.closest(this._triggerSelector)){const s=t.closest(this._triggerSelector),n=s.nextElementSibling;this._hideOpen?document.querySelectorAll(this._triggerSelector).forEach(t=>{s===t?this._toggle(s,n,e):(t.classList.remove(this._headActive),t.nextElementSibling.classList.remove(this._contentActive),t.nextElementSibling.style.display="none")}):this._toggle(s,n,e)}})}_toggle(e,t,s){s.target&&s.preventDefault(),t.style.display=t.style.display===this._display?"none":this._display,e.classList.toggle(this._headActive),setTimeout(()=>{t.classList.toggle(this._contentActive)})}}class r extends class{accept(e){return e(this),this}}{constructor(e){let{dropdownToggleSelector:t=".dropdown-sumbiot__toggle",dropdownOptionsWrapperSelector:s=".dropdown-sumbiot__options"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this._dropdownSelector=e,this._dropdownToggleSelector=t,this._listDropdowns=document.querySelectorAll(e),this._listDropdownsOptions=document.querySelectorAll(s),this._init()}_init(){this.hideAllDropdowns(),this._toggleHandler()}hideAllDropdowns(){this._listDropdownsOptions.forEach(e=>{this._target?this._target.nextElementSibling!==e&&(e.style.display="none"):e.style.display="none"})}_toggleHandler(){this._listDropdowns.forEach(e=>{e.addEventListener("click",e=>{e.target&&e.target.classList.contains(this._dropdownToggleSelector.slice(1))&&(e.preventDefault(),this._target=e.target,this._toggleOptions())})})}_toggleOptions(){this.hideAllDropdowns(),this._target.nextElementSibling.style.display="none"===this._target.nextElementSibling.style.display?"block":"none"}}class l extends r{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this._dropdownOptionSelector=t.dropdownOptionSelector||"[data-select-option]"}_toggleHandler(){this._listDropdowns.forEach(e=>{this._initInput(e),e.addEventListener("click",t=>{t.target&&t.target.classList.contains(this._dropdownToggleSelector.slice(1))?(t.preventDefault(),this._target=t.target,this._toggleOptions()):t.target&&t.target.matches(this._dropdownOptionSelector)&&(t.preventDefault(),this._select(e,t.target))})}),document.addEventListener("click",e=>{e.target&&!e.target.closest(this._dropdownSelector)&&this._listDropdownsOptions.forEach(e=>{e.style.display="none"})},!0)}_select(e,t){const s=e.querySelectorAll(this._dropdownOptionSelector),n=e.querySelector(this._dropdownToggleSelector);s.forEach(e=>{e.style.backgroundColor=""}),t.style.backgroundColor="#e7e7e7",n.innerHTML=t.innerText,t.getAttribute("title")?n.setAttribute("title",t.getAttribute("title")):n.removeAttribute("title"),n.nextElementSibling.style.display="none",e.previousElementSibling.setAttribute("value",t.dataset.selectOption)}_initInput(e){const t=document.createElement("input");t.classList.add("sumbiot-input-select"),t.setAttribute("type","hidden"),t.setAttribute("name",e.dataset.selectName),t.setAttribute("value",""),e.insertAdjacentElement("beforebegin",t)}reset(e){const t=e.querySelectorAll(this._dropdownToggleSelector),s=e.querySelectorAll(this._dropdownOptionSelector),n=e.querySelectorAll(".sumbiot-input-select");t.forEach(e=>{e.innerText="",e.removeAttribute("title")}),s.forEach(e=>{e.style.backgroundColor=""}),n.forEach(e=>{e.setAttribute("value","")})}}class a extends r{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this._dropdownOptionSelector=t.dropdownOptionSelector||"[data-input-search-option]"}_init(){this.hideAllDropdowns(),this._searchHandler()}hideAllDropdowns(){this._listDropdownsOptions.forEach(e=>{e.style.display="none"})}_searchHandler(){this._listDropdowns.forEach(e=>{e.addEventListener("input",e=>{e.target&&e.target.classList.contains(this._dropdownToggleSelector.slice(1))&&(e.preventDefault(),this._showOptionsWrapper(e.target))}),e.addEventListener("click",t=>{t.target&&t.target.matches(this._dropdownOptionSelector)&&(t.preventDefault(),this._activeInput(e,t.target))})}),document.addEventListener("click",e=>{e.target&&!e.target.closest(this._dropdownSelector)&&this.hideAllDropdowns()},!0)}_showOptionsWrapper(e){let t=!1,s=e.value.trim();if(s&&s.length>2){Array.from(document.querySelectorAll(`${this._dropdownSelector} ${this._dropdownOptionSelector}`)).forEach(e=>{e.innerText.toUpperCase().includes(s.toUpperCase())?(e.style.display="block",t=!0):e.style.display="none"}),e.nextElementSibling.style.display=t?"block":"none"}else e.nextElementSibling.style.display="none"}_activeInput(e,t){e.querySelector(this._dropdownToggleSelector).value=t.innerText,this.hideAllDropdowns()}}class c{constructor(e){let{}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$el=document.querySelector(e),this._init()}_init(){}hide(){this.$el.classList.add("hide"),this._onHide()}show(){this.$el.classList.remove("hide"),this._onShow()}_onHide(){}_onShow(){}}class d{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.form=e,this.controls=t}value(){const e={};return Object.keys(this.controls).forEach(t=>{e[t]=this.form[t].value}),e}isValid(){let e=!0;return Object.keys(this.controls).forEach(t=>{if(this.controls[t].length){const s=this.controls[t];let n=!0;s.forEach(e=>{n=e(this.form[t].value)&&n}),n?u(this.form[t]):function(e){u(e);e.nextElementSibling.firstElementChild.style.backgroundColor="#fff5f5",e.previousElementSibling.insertAdjacentHTML("beforeend",'<span class="form__validation-error">Введите значение</span>')}(this.form[t]),e=e&&n}}),e}clear(){this.form.reset()}}function u(e){e.nextElementSibling.firstElementChild.style.backgroundColor="",e.previousElementSibling.querySelector(".form__validation-error")&&e.previousElementSibling.querySelector(".form__validation-error").remove()}class p{static required(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e&&e.trim()}static minLength(e){return t=>t.length>=e}}const m=new class{constructor(e){this.componentBx=e}async useRequest(e,t){return new Promise((e,t)=>{setTimeout(()=>{e({status:"error",data:{result:"[]"},errors:[{message:"Не заполено поле Email",code:0,customData:null}]})},2e3)})}}("bizproc:otipb.new");class h{constructor(){let{loading:e="Загрузка...",success:t="Успех",failure:s="Неудача",activeClass:n=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.message={loading:{title:e,img:""},success:{title:t,img:"loader__img--ok"},failure:{title:s,img:"loader__img--error"}},this.activeClass=n,this._init()}_init(){this.$el=document.createElement("div"),this.$el.classList.add("loader"),this.activeClass&&this.$el.classList.add(this.activeClass),this.$el.innerHTML=`\n      <div class="loader__img"></div>\n      <p class="loader__massage">${this.message.loading.title}</p>\n    `,this.$img=this.$el.querySelector(".loader__img"),this.$massage=this.$el.querySelector(".loader__massage")}loading(){return this.$el}success(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$img.classList.add(this.message.success.img),this.$massage.innerHTML=e||this.message.success.title}failure(){this.$img.classList.add(this.message.failure.img),this.$massage.innerHTML=this.message.failure.title}removeLoader(){this.$el.remove()}}class _ extends c{constructor(e,t){super(e,t),this.instanceDropDown=t.dropDown||{}}_init(){this.$el.addEventListener("submit",g.bind(this)),this.form=new d(this.$el,{E_FIO:[],ID_DIVISION:[p.required],ID_DEPARTMENT:[p.required],ID_MATRIX_WORKS:[p.required],E_EMPLOYEE_STATUS:[p.required]})}}async function g(e){if(e.preventDefault(),this.form.isValid()){const e=new h({loading:"Идет добавления сотрудника",success:"Сотрудник добавлен",failure:"Сотрудник не добавлен"});try{const t=this.$el.getAttribute("action").slice(1),s=new FormData(this.$el),n=document.querySelector(".js-options-search");this.$el.append(e.loading());const o=await m.useRequest(t,s);e.success(),n.append(function(e){let t=document.createElement("div"),s=document.createTextNode(e);return t.append(s),t.classList.add("dropdown__item"),t.setAttribute("title",e),t.style.display="none",t}(o.data.result))}catch(t){e.failure(),"error"===t.status?(console.group("In file ApiService, in function useRequest, promise return reject"),console.group("List of errors"),t.errors.forEach(e=>{console.error(`Name: ${e.message}\n Code: ${e.code}\n customData: ${e.customData}`)}),console.groupEnd(),console.groupEnd()):(console.group("In file AddUserComponent error"),console.error(""+t.stack),console.groupEnd())}finally{setTimeout(()=>{this.form.clear(),this.instanceDropDown.reset(this.form.form),e.removeLoader()},900)}}}function f(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class v extends class{accept(e){return e(this),this}}{constructor(e,t,s){let{perpage:n=16,page:o=1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),f(this,"_switchingHandler",e=>{e.preventDefault();let t=e.target;(t&&t.classList.contains("pagination__btn")||t&&t.parentElement.classList.contains("pagination__btn"))&&(t.parentElement.classList.contains("pagination__btn")&&(t=t.parentElement),this._switchPage(t))}),this.$paginationInElement=document.querySelector(e),this.$resultInElement=document.querySelector(t),this._listElements=s,this._countListElements=this._listElements.length||0,this._perpage=n,this._pagesCount=Math.ceil(this._countListElements/this._perpage),this._page=o,this._init()}_init(){this._switchPage()}_switchPage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&(this._page=+e.dataset.page);let t=(this._page-1)*this._perpage,s=t+this._perpage,n=this._listElements.slice(t,s);this.$resultInElement.innerHTML="",this.$resultInElement.insertAdjacentHTML("beforeend",n.join("")),this._removeEventListenerClick(),this._pagesCount>1&&this._paginationCreate()}_paginationCreate(){const e=document.createElement("div");e.classList.add("pagination");let t=this._page>3?'<button type="button" class="pagination__btn" data-page="1">1</button>':"",s=this._page<this._pagesCount-2?`<button type="button" class="pagination__btn" data-page="${this._pagesCount}">${this._pagesCount}</button>`:"",n=this._page-4>1?'<span class="pagination__plug">...</span>':"",o=this._page-3>1?`<button type="button" class="pagination__btn" data-page="${this._page-3}">${this._page-3}</button>`:"",i=this._page-2>0?`<button type="button" class="pagination__btn" data-page="${this._page-2}">${this._page-2}</button>`:"",r=this._page-1>0?`<button type="button" class="pagination__btn" data-page="${this._page-1}">${this._page-1}</button>`:"",l=this._page+4<this._pagesCount?'<span class="pagination__plug">...</span>':"",a=this._page+3<this._pagesCount?`<button type="button" class="pagination__btn" data-page="${this._page+3}">${this._page+3}</button>`:"",c=this._page+2<=this._pagesCount?`<button type="button" class="pagination__btn" data-page="${this._page+2}">${this._page+2}</button>`:"",d=this._page+1<=this._pagesCount?`<button type="button" class="pagination__btn" data-page="${this._page+1}">${this._page+1}</button>`:"",u=`<button type="button" class="pagination__btn pagination__btn--active">${this._page}</button>`;e.innerHTML=t+n+o+i+r+u+d+c+a+l+s,this.$paginationInElement.append(e),this._addEventListenerClick()}_addEventListenerClick(){this.$paginationInElement.querySelectorAll(".pagination__btn").forEach(e=>{e.addEventListener("click",this._switchingHandler)})}_removeEventListenerClick(){var e;this.$paginationInElement.querySelectorAll(".pagination__btn").forEach(e=>{e.removeEventListener("click",this._switchingHandler)}),null===(e=this.$paginationInElement.querySelector(".pagination"))||void 0===e||e.remove()}}function b(e){let{idUser:t,fio:s,division:n,department:o,work:i,status:r}=e,{build:l=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=()=>1===l||2===l?`\n        <div class="col-4 g-justify-items-left js-matrix-work-hse" title="${i||"не заполнено"}">\n          <span class="result__clip">\n            ${i||"не заполнено"}\n          </span>\n        </div>\n      `:`\n        <div class="col-4 js-matrix-work-hse">\n          <span class="p-relative d-inline-block">\n            <button class="button button--icon js-add-hse-modal" type="button" data-sumbiot-target="#add-hse-modal" data-id="${t}" title="Добавить должность HSE">\n              <img class="result__img" src="${BX.message("TemplateFolder")}/assets/img/add-document-icon.svg" width="18" height="18" alt="">\n            </button>\n          </span>\n        </div>\n      `;return`\n    <div class="col-1" title="ID: ${t}"></div>\n    <div class="col-2" title="Отдел: ${o||"не заполнено"}">\n      <span class="result__clip text-align-center">\n        ${n||"не заполнено"}\n      </span>\n    </div>\n    <div class="col-3 g-justify-items-left" title="${s||"не заполнено"}">\n      <span class="result__clip">\n        ${s||"не заполнено"}\n      </span>\n    </div>\n    ${a()}\n    <div class="col-1">${r||"не заполнено"}</div>\n    <div class="col-1">\n      <button class="result__options-arrow button button--arrow" type="button" title="Подробно"></button>\n    </div>\n  `}function y(e,t){let{idCard:s,programName:n,cardNumber:o,attestationDate:i,nextAttestationDate:r}=e,{idUser:l=null,customUser:a=null}=t;return`\n    <div class="result__row result__row--inner">\n      <div class="row gx-0">\n        <div class="col-5 g-justify-items-left" title="${n||"не заполнено"}">\n          <span class="result__clip">\n            ${n||"не заполнено"}\n          </span>\n        </div>\n        <div class="col-3" title="Номер документа: ${o||"не заполнено"}&#10Дата аттестации: ${i||"не заполнено"}">\n          <span class="result__clip text-align-center">\n            ${o||"не заполнено"}\n          </span>\n        </div>\n        <div class="col-2">${r||"не заполнено"}</div>\n        <div class="col-2">\n          <span class="result__options-card">\n            <button class="button button--text js-edit-card-modal js-edit-card"" type="button" data-sumbiot-target="#edit-card-modal" data-id="${s}" data-id-user="${l}" data-custom-user="${a}" data-action="/editCard">Редактировать</button>\n            <span class="p-relative d-inline-block">\n              <button class="button button--text button--img-delete js-delete-user-and-card-modal" type="button" data-sumbiot-target="#delete-user-or-card-modal" data-id="${s}" data-id-user="${l}" data-custom-user="${a}" data-action="/deleteCard" title="Удалить удостоверение"></button>\n            </span>\n          </span>\n        </div>\n      </div>\n    </div>\n  `}function w(e,t){let{ID:s,NAME:n}=e,{idUser:o=null,customUser:i=null}=t;return`\n    <div class="result__row result__row--inner">\n      <div class="row gx-0">\n        <div class="col g-justify-items-left" title="${n||"не заполнено"}">\n          <span class="result__clip">\n            ${n||"не заполнено"}\n          </span>\n        </div>\n        <div class="col-3">\n          <button class="button button--text js-edit-card-modal" type="button" data-sumbiot-target="#edit-card-modal" data-id="${s}" data-id-user="${o}" data-custom-user="${i}" data-action="/addCard">Добавить</button>\n        </div>\n      </div>\n    </div>\n  `}function E(e,t){let{idCard:s,programName:n,cardNumber:o,nextAttestationDate:i}=e,{idUser:r=null,customUser:l=null}=t;return`\n    <div class="result__row result__row--inner">\n      <div class="row gx-0">\n        <div class="col-9 g-justify-items-left" title="${n||"не заполнено"}.&#10Номер документа: ${o||"не заполнено"}&#10Аттестация закончилась: ${i||"не заполнено"}">\n          <span class="result__clip">\n            ${n||"не заполнено"}\n          </span>\n        </div>\n        <div class="col-3">\n          <span class="result__options-card">\n            <button class="button button--text js-edit-card-modal js-edit-card"" type="button" data-sumbiot-target="#edit-card-modal" data-id="${s}" data-id-user="${r}" data-custom-user="${l}" data-action="/editCard">Продлить</button>\n            <span class="p-relative d-inline-block">\n              <button class="button button--text button--img-delete js-delete-user-and-card-modal" type="button" data-sumbiot-target="#delete-user-or-card-modal" data-id="${s}" data-id-user="${r}" data-custom-user="${l}" data-action="/deleteCard" title="Удалить удостоверение"></button>\n            </span>\n          </span>\n        </div>\n      </div>\n    </div>\n  `}function S(e){return`\n    <div class="result__row result__row--inner">\n      <div class="row gx-0">\n        <div class="col-12">\n              ${e}\n        </div>\n      </div>\n    </div>\n  `}function $(e){let{idUser:t,cards:s,training:n,customUser:o}=e,{build:i=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=()=>s&&s.NORMAL_DATE?s.NORMAL_DATE.map(e=>y(e,{idUser:t,customUser:o})).join(" "):S("Нет удостоверений"),l=()=>n&&n.length?n.map(e=>w(e,{idUser:t,customUser:o})).join(" "):S("Нет обучений"),a=()=>s&&s.OVER_DATE?s.OVER_DATE.map(e=>E(e,{idUser:t,customUser:o})).join(" "):S("Нет удостоверений"),c=()=>1===i?`\n        <button class="result__info-options-btn button button--icon js-edit-user-modal" type="button" data-sumbiot-target="#edit-user-modal" data-id="${t}" title="Редактировать сотрудника">\n          <img class="result__img" src="${BX.message("TemplateFolder")}/assets/img/edit-user-icon.svg" width="22" height="22" alt="">\n        </button>\n        <span class="p-relative d-inline-block">\n          <button class="result__info-options-btn button button--icon js-delete-user-and-card-modal" type="button" data-sumbiot-target="#delete-user-or-card-modal" data-id="${t}" data-action="/deleteUser" title="Удалить сотрудника">\n            <img class="result__img" src="${BX.message("TemplateFolder")}/assets/img/remove-user-icon.svg" width="22" height="22" alt="">\n          </button>\n        </span>\n      `:2===i?`\n        <button class="result__info-options-btn button button--icon js-edit-hse-modal" type="button" data-sumbiot-target="#edit-hse-modal" data-id="${t}" title="Изменить должность HSE">\n          <img class="result__img" src="${BX.message("TemplateFolder")}/assets/img/edit-document-icon.svg" width="22" height="22" alt="">\n        </button>\n      `:"";return`\n    <div class="result__info-box">\n      <div class="result__info-title">\n        Удостоверение действующие\n\n        <div class="result__info-options">\n          ${c()}\n        </div>\n      </div>\n\n      <div class="result__info-box-inner">\n\n        <div class="result__row result__row--inner result__row--inner-header">\n          <div class="row gx-0">\n            <div class="col-5">Программа обучения</div>\n            <div class="col-3">Номер документа</div>\n            <div class="col-2">Дата след. аттестации</div>\n            <div class="col-2">Опции</div>\n          </div>\n        </div>\n\n        ${r()}\n\n      </div>\x3c!--.result__info-box-inner--\x3e\n\n    </div>\x3c!--./result__info-box--\x3e\n\n    <div class="result__info-box">\n      <div class="result__info-title">Доступные обучения</div>\n\n      <div class="result__info-box-inner">\n\n        <div class="result__row result__row--inner result__row--inner-header">\n          <div class="row gx-0">\n            <div class="col-9">Программа обучения</div>\n            <div class="col-3">Опции</div>\n          </div>\n        </div>\n\n        ${l()}\n\n      </div>\x3c!--.result__info-box-inner--\x3e\n\n    </div>\x3c!--./result__info-box--\x3e\n\n    <div class="result__info-box">\n      <div class="result__info-title">Удостоверение на переаттестации</div>\n\n      <div class="result__info-box-inner">\n\n        <div class="result__row result__row--inner result__row--inner-header">\n          <div class="row gx-0">\n            <div class="col-9">Программа обучения</div>\n            <div class="col-3">Опции</div>\n          </div>\n        </div>\n\n        ${a()}\n\n      </div>\x3c!--.result__info-box-inner--\x3e\n\n    </div>\x3c!--./result__info-box--\x3e\n  `}function L(e){let{build:t=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return`\n    <div class="result__row js-result-row">\n\n      <div class="row gx-0 js-accordion js-user-info">\n        ${b(e,{build:t})}\n      </div>\x3c!--/.js-user-info--\x3e\n\n      <div class="result__info js-wrapper-modal">\n        ${$(e,{build:t})}\n      </div>\x3c!--./result__info--\x3e\n\n    </div>\x3c!--./result__row--\x3e\n  `}function A(e){return`\n    <div class="result__row js-result-row">\n      <div class="row gx-0 result__empty">\n        <div class="col-12 text-align-center d-block">\n          ${e}\n        </div>\n      </div>\n    </div>\x3c!--./result__row--\x3e\n  `}class D extends c{constructor(e,t){super(e,t),this.instanceDropDown=t.dropDown||{}}_init(){this.$el.addEventListener("submit",j.bind(this)),this.$el.addEventListener("reset",C.bind(this)),this.form=new d(this.$el,{DATE_BEGIN:[],DATE_END:[],ID_DIVISION:[],ID_MATRIX_WORKS:[],ID_PROGRAM:[]})}_hideAllBlocks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;document.querySelectorAll(".result__body").forEach(t=>{var s;(t.style.display="none",t.matches("#filter-result"))&&(t.querySelector(".result__inner").innerHTML="",null===(s=t.querySelector(".pagination"))||void 0===s||s.remove());"function"==typeof e&&e(t)})}}async function j(e){if(e.preventDefault(),e.target.querySelector(".form__button--submit").blur(),this.form.isValid()){const e=new h({loading:"Идет фильтрация данных",failure:"Ошибка"});try{const t=this.$el.getAttribute("action").slice(1),s=new FormData(this.$el);this.$el.append(e.loading());const n=await m.useRequest(t,s),o=JSON.parse(n.data.result),i=o.length||0;if(e.success(`Найдено: ${i} совпадений`),this._hideAllBlocks(),Array.isArray(o)&&o.length){let e=o.map(e=>+e.customUser?L(e,{build:1}):+e.idMatrixWorks?L(e,{build:2}):L(e,{build:0}));new v("#filter-result","#filter-result .result__inner",e)}else{let e=A(`Найдено: ${i} совпадений`);document.querySelector("#filter-result .result__inner").insertAdjacentHTML("afterbegin",e)}document.querySelector("#filter-result").style.display="block"}catch(t){e.failure(),"error"===t.status?(console.group("In file ApiService, in function useRequest, promise return reject"),console.group("List of errors"),t.errors.forEach(e=>{console.error(`Name: ${e.message}\n Code: ${e.code}\n customData: ${e.customData}`)}),console.groupEnd(),console.groupEnd()):(console.group("In file FilterComponent error"),console.error(""+t.stack),console.groupEnd())}finally{setTimeout(()=>{e.removeLoader()},900)}}}function C(e){setTimeout(()=>{e.target.querySelector(".form__button--reset_filter").blur()},150),this.instanceDropDown.reset(this.form.form),this._hideAllBlocks(e=>{e.matches("#main-result")&&(e.style.display="block")})}class q{static removeClass(e,t){document.querySelectorAll(e).forEach(e=>{e.classList.remove(...t)})}static addClosestClass(e,t,s){e.closest(t).classList.add(...s)}static removeClosestClass(e,t,s){e.closest(t).classList.remove(...s)}}class x extends c{constructor(e,t){super(e,t),this.instanceDropDown=t.dropDown||{}}_init(){this.$el.addEventListener("submit",T.bind(this)),document.addEventListener("click",e=>{let t=e.target;(t&&t.classList.contains("js-edit-user-modal")||t.parentElement.classList.contains("js-edit-user-modal"))&&(e.preventDefault(),t.parentElement.classList.contains("js-edit-user-modal")&&(t=t.parentElement),k.call(this,t))}),this.form=new d(this.$el,{ID:[],E_FIO:[],ID_DIVISION:[p.required],ID_DEPARTMENT:[p.required],ID_MATRIX_WORKS:[p.required],E_EMPLOYEE_STATUS:[p.required]})}}async function k(e){let t;const s=new h({loading:"Идет сбор данных, о сотруднике"});try{const n=new FormData,o=this.$el.querySelector(".js-edit-fio"),i=this.$el.querySelectorAll(".dropdown__item");n.append("ID",e.dataset.id),t=setTimeout(()=>{this.$el.append(s.loading())},400);const r=await m.useRequest("getUserInfo",n),l=JSON.parse(r.data.result);o.value=l.fio,delete l.fio;const a=Object.values(l);i.forEach(e=>{a.includes(e.dataset.selectOption)&&e.click()})}catch(e){"error"===e.status?(console.group("In file ApiService, in function useRequest, promise return reject"),console.group("List of errors"),e.errors.forEach(e=>{console.error(`Name: ${e.message}\n Code: ${e.code}\n customData: ${e.customData}`)}),console.groupEnd(),console.groupEnd()):(console.group("In file EditUserComponent, in function getData error"),console.error(""+e.stack),console.groupEnd())}finally{clearTimeout(t),s.removeLoader()}}async function T(e){if(e.preventDefault(),this.form.isValid()){const e=new h({loading:"Идет добавления сотрудника",success:"Сотрудник добавлен",failure:"Сотрудник не добавлен"});try{const t=this.$el.getAttribute("action").slice(1),s=new FormData(this.$el);this.$el.append(e.loading());const n=await m.useRequest(t,s),o=JSON.parse(n.data.result),i=b(o,{build:1}),r=$(o,{build:1});e.success(),setTimeout(()=>{const e=this.$el.closest(".result__row"),t=e.querySelector(".js-user-info"),s=e.querySelector(".result__info");t.innerHTML=i,s.innerHTML=r},900)}catch(t){e.failure(),"error"===t.status?(console.group("In file ApiService, in function useRequest, promise return reject"),console.group("List of errors"),t.errors.forEach(e=>{console.error(`Name: ${e.message}\n Code: ${e.code}\n customData: ${e.customData}`)}),console.groupEnd(),console.groupEnd()):(console.group("In file EditUserComponent, in function submitHandler error"),console.error(""+t.stack),console.groupEnd())}finally{setTimeout(()=>{this.form.clear(),this.instanceDropDown.reset(this.form.form),this.$el.closest(".modal").style.display="none",q.removeClass(".js-wrapper-modal",["result__info--min_height-380","result__info--min_height-442","result__info--min_height-265"]),e.removeLoader()},900)}}}class O extends c{constructor(e,t){super(e,t)}_init(){this.$el.addEventListener("submit",I.bind(this)),this.form=new d(this.$el,{ID:[]})}}async function I(e){if(e.preventDefault(),this.form.isValid()){const e=new h({loading:"Удаление",success:"Удален",failure:"Неудача",activeClass:"loader--delete"});try{const t=this.$el.getAttribute("action").slice(1),s=new FormData(this.$el);this.$el.append(e.loading());const n=await m.useRequest(t,s);if("deleteUser"===t&&(e.success(),setTimeout(()=>{this.$el.closest(".result__row").remove()},900)),"deleteCard"===t){const t=JSON.parse(n.data.result),s=+t.customUser?$(t,{build:1}):+t.idMatrixWorks?$(t,{build:2}):$(t,{build:0});e.success(),setTimeout(()=>{this.$el.closest(".js-result-row").querySelector(".result__info").innerHTML=s},900)}}catch(t){e.failure(),"error"===t.status?(console.group("In file ApiService, in function useRequest, promise return reject"),console.group("List of errors"),t.errors.forEach(e=>{console.error(`Name: ${e.message}\n Code: ${e.code}\n customData: ${e.customData}`)}),console.groupEnd(),console.groupEnd()):(console.group("In file DeleteUserOrCardComponent, in function submitHandler error"),console.error(""+t.stack),console.groupEnd())}finally{setTimeout(()=>{this.$el.closest(".modal").style.display="none",e.removeLoader()},900)}}}class M extends c{constructor(e,t){super(e,t)}_init(){this.$el.addEventListener("submit",U.bind(this)),document.addEventListener("click",e=>{let t=e.target;(t&&t.classList.contains("js-edit-card-modal")||t.parentElement.classList.contains("js-edit-card-modal"))&&(e.preventDefault(),t.parentElement.classList.contains("js-edit-card-modal")&&(t=t.parentElement),this.form.clear()),(t&&t.classList.contains("js-edit-card")||t.parentElement.classList.contains("js-edit-card"))&&(e.preventDefault(),t.parentElement.classList.contains("js-edit-card")&&(t=t.parentElement),H.call(this,t))}),this.form=new d(this.$el,{ID:[],C_ATTESTATION_DATE:[],C_NEXT_ATTESTATION_DATE:[],C_CARD_NUMBER:[]})}}async function H(e){let t;const s=new h({loading:"Идет сбор данных, об удостоверение"});try{const n=new FormData,o=this.$el.querySelector(".js-edit-att-date"),i=this.$el.querySelector(".js-edit-next-att-date"),r=this.$el.querySelector(".js-edit-card-number");n.append("ID",e.dataset.id),t=setTimeout(()=>{this.$el.append(s.loading())},400);const l=await m.useRequest("getCard",n),a=JSON.parse(l.data.result);o.value=a.attestationDate,i.value=a.nextAttestationDate,r.value=a.cardNumber}catch(e){"error"===e.status?(console.group("In file ApiService, in function useRequest, promise return reject"),console.group("List of errors"),e.errors.forEach(e=>{console.error(`Name: ${e.message}\n Code: ${e.code}\n customData: ${e.customData}`)}),console.groupEnd(),console.groupEnd()):(console.group("In file EditCardComponent, in function getData error"),console.error(""+e.stack),console.groupEnd())}finally{clearTimeout(t),s.removeLoader()}}async function U(e){if(e.preventDefault(),this.form.isValid()){let e;"addCard"===this.$el.getAttribute("action").slice(1)?e=new h({loading:"Добавление удостоверения",success:"Удостоверение добавлено",failure:"Удостоверение не добавлено"}):"editCard"===this.$el.getAttribute("action").slice(1)&&(e=new h({loading:"Редактирование удостоверения",success:"Удостоверение отредактировано",failure:"Удостоверение не отредактировано"}));try{const t=this.$el.getAttribute("action").slice(1),s=new FormData(this.$el);this.$el.append(e.loading());const n=await m.useRequest(t,s),o=JSON.parse(n.data.result),i=+o.customUser?$(o,{build:1}):+o.idMatrixWorks?$(o,{build:2}):$(o,{build:0});e.success(),setTimeout(()=>{this.$el.closest(".result__row").querySelector(".result__info").innerHTML=i},900)}catch(t){e.failure(),"error"===t.status?(console.group("In file ApiService, in function useRequest, promise return reject"),console.group("List of errors"),t.errors.forEach(e=>{console.error(`Name: ${e.message}\n Code: ${e.code}\n customData: ${e.customData}`)}),console.groupEnd(),console.groupEnd()):(console.group("In file AddOrEditCardComponent, in function submitHandler error"),console.error(""+t.stack),console.groupEnd())}finally{setTimeout(()=>{this.form.clear(),this.$el.closest(".modal").style.display="none",q.removeClass(".js-wrapper-modal",["result__info--min_height-380","result__info--min_height-442","result__info--min_height-265"]),e.removeLoader()},900)}}}class R extends c{constructor(e,t){super(e,t)}_init(){this.$el.addEventListener("submit",P.bind(this)),"edit-hse"===this.$el.getAttribute("id")&&document.addEventListener("click",e=>{let t=e.target;(t&&t.classList.contains("js-edit-hse-modal")||t.parentElement.classList.contains("js-edit-hse-modal"))&&(e.preventDefault(),t.parentElement.classList.contains("js-edit-hse-modal")&&(t=t.parentElement),N.call(this,t))}),this.form=new d(this.$el,{ID:[],ID_MATRIX_WORKS:[p.required]})}}async function N(e){let t;const s=new h({loading:"Идет сбор данных, о сотруднике"});try{const n=new FormData,o=this.$el.querySelectorAll(".dropdown__item");n.append("ID",e.dataset.id),t=setTimeout(()=>{this.$el.append(s.loading())},400);const i=await m.useRequest("getIdHse",n);o.forEach(e=>{+e.dataset.selectOption==+i.data.result&&e.click()})}catch(e){"error"===e.status?(console.group("In file ApiService, in function useRequest, promise return reject"),console.group("List of errors"),e.errors.forEach(e=>{console.error(`Name: ${e.message}\n Code: ${e.code}\n customData: ${e.customData}`)}),console.groupEnd(),console.groupEnd()):(console.group("In file AddOrEditHseComponent, in function getData error"),console.error(""+e.stack),console.groupEnd())}finally{clearTimeout(t),s.removeLoader()}}async function P(e){if(e.preventDefault(),this.form.isValid()){const e=new h({loading:"Добавление должности",success:"Должность добавлена",failure:"Должность не добавлена"});try{const t=this.$el.getAttribute("action").slice(1),s=new FormData(this.$el);this.$el.querySelector("button").blur(),this.$el.append(e.loading());const n=await m.useRequest(t,s),o=JSON.parse(n.data.result),i=$(o,{build:2}),r=`\n    <span class="result__clip">\n      ${o.work}\n    </span>\n  `;e.success(),setTimeout(()=>{const e=this.$el.closest(".result__row"),t=e.querySelector(".result__info"),s=e.querySelector(".js-matrix-work-hse");t.innerHTML=i,s.classList.add("g-justify-items-left"),s.setAttribute("title",o.work),s.innerHTML=r},900)}catch(t){e.failure(),"error"===t.status?(console.group("In file ApiService, in function useRequest, promise return reject"),console.group("List of errors"),t.errors.forEach(e=>{console.error(`Name: ${e.message}\n Code: ${e.code}\n customData: ${e.customData}`)}),console.groupEnd(),console.groupEnd()):(console.group("In file AddOrEditHseComponent, in function submitHandler error"),console.error(""+t.stack),console.groupEnd())}finally{setTimeout(()=>{this.$el.closest(".modal").style.display="none",q.removeClass(".js-wrapper-modal",["result__info--min_height-380","result__info--min_height-442","result__info--min_height-265"]),e.removeLoader()},900)}}}class F extends c{constructor(e,t){super(e,t)}_init(){this.$el.addEventListener("submit",B.bind(this)),this.form=new d(this.$el,{SEARCH:[],STATUS:[]}),W.call(this)}_hideAllBlocks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;document.querySelectorAll(".result__body").forEach(t=>{var s;(t.style.display="none",t.matches("#search-result"))&&(t.querySelector(".result__inner").innerHTML="",null===(s=t.querySelector(".pagination"))||void 0===s||s.remove());"function"==typeof e&&e(t)})}}async function W(){try{const e=new FormData,t=this.$el.querySelector(".js-options-search"),s=await m.useRequest("getUsers",e),n=JSON.parse(s.data.result);if(Array.isArray(n)){let e=n.map(e=>`\n            <div class="dropdown__item" title="${e}" style="display: none">\n              ${e}\n            </div>\n        `);t.innerHTML="",t.insertAdjacentHTML("afterbegin",e.join(""))}}catch(e){"error"===e.status?(console.group("In file ApiService, in function useRequest, promise return reject"),console.group("List of errors"),e.errors.forEach(e=>{console.error(`Name: ${e.message}\n Code: ${e.code}\n customData: ${e.customData}`)}),console.groupEnd(),console.groupEnd()):(console.group("In file SearchComponent, in function getData error"),console.error(""+e.stack),console.groupEnd())}}async function B(e){e.preventDefault();let t=e.target.querySelector(".js-button-search-submit");if(t.disabled=!0,setTimeout(()=>{t.blur()},150),this.form.isValid()){const e=new h({loading:"Идет поиск сотрудника",failure:"Ошибка",activeClass:"loader--min-height"});try{var s,n;const o=this.$el.getAttribute("action").slice(1),i=new FormData(this.$el),r=document.querySelector("#search-result");this._hideAllBlocks(),null===(s=this.$el.querySelector(".form__button--reset_search"))||void 0===s||s.remove(),r.prepend(e.loading()),r.style.display="block";const l=await m.useRequest(o,i),a=JSON.parse(l.data.result),c=a.length||0;if(e.success(`Найдено: ${c} совпадений`),Array.isArray(a)&&a.length){let e=a.map(e=>+e.customUser?L(e,{build:1}):+e.idMatrixWorks?L(e,{build:2}):L(e,{build:0}));setTimeout(()=>{new v("#search-result","#search-result .result__inner",e)},950)}else{let e=A("Ваш запрос не дал результатов");setTimeout(()=>{var t;r.querySelector(".result__inner").insertAdjacentHTML("afterbegin",e),null===(t=r.querySelector(".text-align-center"))||void 0===t||t.append(J.call(this))},950)}null===(n=this.$el.querySelector(".dropdown--input"))||void 0===n||n.append(V.call(this))}catch(t){e.failure(),"error"===t.status?(console.group("In file ApiService, in function useRequest, promise return reject"),console.group("List of errors"),t.errors.forEach(e=>{console.error(`Name: ${e.message}\n Code: ${e.code}\n customData: ${e.customData}`)}),console.groupEnd(),console.groupEnd()):(console.group("In file SearchComponent error"),console.error(""+t.stack),console.groupEnd())}finally{setTimeout(()=>{e.removeLoader(),t.disabled=!1},900)}}}function V(){const e=s=>{s.preventDefault(),s.stopPropagation(),this.form.clear(),this.$el.querySelector(".dropdown__toggle").style.paddingRight="",t.removeEventListener("click",e),t.remove(),this._hideAllBlocks(e=>{e.matches("#main-result")&&(e.style.display="block")})},t=(()=>{let e=document.createElement("button");return e.classList.add("form__button","form__button--reset_search"),e.setAttribute("type","reset"),e})();return this.$el.querySelector(".dropdown__toggle").style.paddingRight="30px",t.addEventListener("click",e),t}function J(){let e=document.createElement("button"),t=document.createTextNode("на главную");return e.append(t),e.classList.add("button","button--text"),e.style.marginLeft="10px",e.addEventListener("click",()=>{var e;this.$el.querySelector(".dropdown__toggle")&&(this.$el.querySelector(".dropdown__toggle").style.paddingRight=""),null===(e=this.$el.querySelector(".form__button--reset_search"))||void 0===e||e.remove(),this._hideAllBlocks(e=>{e.matches("#main-result")&&(e.style.display="block")})}),e}class X{static modalsUnityMod(e){e.upgrade=function(){const e=e=>{let t=e.innerText;this.modal.querySelector(".modal__title").innerText=(t||"Редактировать")+" удостоверение"},t=e=>{this.modal.querySelector("form").action=e.dataset.action||""},s=e=>{if(e.dataset.idUser){const t=document.createElement("input");t.classList.add("js-input-user-id"),t.setAttribute("type","hidden"),t.setAttribute("name","ID_USER"),t.setAttribute("value",e.dataset.idUser),this.modal.querySelector("form").prepend(t)}if(e.dataset.customUser){const t=document.createElement("input");t.classList.add("js-input-custom-user"),t.setAttribute("type","hidden"),t.setAttribute("name","CUSTOM_USER"),t.setAttribute("value",e.dataset.customUser),this.modal.querySelector("form").prepend(t)}},n=()=>{const e=this.modal.querySelectorAll("input");for(let t of e)(t.classList.contains("js-input-user-id")||t.classList.contains("js-input-custom-user"))&&t.remove()};document.addEventListener("click",o=>{let i=o.target;(i&&i.classList.contains(this._trigger.slice(1))||i.parentElement.classList.contains(this._trigger.slice(1)))&&(i.parentElement.classList.contains(this._trigger.slice(1))&&(i=i.parentElement),q.removeClass(".js-wrapper-modal",["result__info--min_height-380","result__info--min_height-442","result__info--min_height-265"]),q.addClosestClass(i,".js-wrapper-modal",["result__info--min_height-380"]),n(),e(i),t(i),s(i))}),this._close.addEventListener("click",e=>{q.removeClosestClass(e.target,".js-wrapper-modal",["result__info--min_height-380"])}),window.addEventListener("keydown",e=>{"Escape"!==e.key&&27!==e.keyCode||q.removeClass(".js-wrapper-modal",["result__info--min_height-380","result__info--min_height-442","result__info--min_height-265"])})}}static modalsStandardMod(e){e.upgrade=function(){document.addEventListener("click",e=>{let t=e.target;t&&t.classList.contains(this._trigger.slice(1))||t&&t.parentElement.classList.contains(this._trigger.slice(1))})}}static editUserMod(e){e.upgrade=function(){document.addEventListener("click",e=>{let t=e.target;(t&&t.classList.contains(this._trigger.slice(1))||t.parentElement.classList.contains(this._trigger.slice(1)))&&(t.parentElement.classList.contains(this._trigger.slice(1))&&(t=t.parentElement),q.removeClass(".js-wrapper-modal",["result__info--min_height-380","result__info--min_height-442","result__info--min_height-265"]),q.addClosestClass(t,".js-wrapper-modal",["result__info--min_height-442"]))}),this._close.addEventListener("click",e=>{q.removeClosestClass(e.target,".js-wrapper-modal",["result__info--min_height-442"])})}}static modalsUnityDeleteMod(e){e.upgrade=function(){const e=e=>{this.modal.querySelector("form").action=e.dataset.action||""},t=e=>{if(e.dataset.idUser){const t=document.createElement("input");t.classList.add("js-input-user-id"),t.setAttribute("type","hidden"),t.setAttribute("name","ID_USER"),t.setAttribute("value",e.dataset.idUser),this.modal.querySelector("form").prepend(t)}if(e.dataset.customUser){const t=document.createElement("input");t.classList.add("js-input-custom-user"),t.setAttribute("type","hidden"),t.setAttribute("name","CUSTOM_USER"),t.setAttribute("value",e.dataset.customUser),this.modal.querySelector("form").prepend(t)}},s=()=>{const e=this.modal.querySelectorAll("input");for(let t of e)(t.classList.contains("js-input-user-id")||t.classList.contains("js-input-custom-user"))&&t.remove()};document.addEventListener("click",n=>{let o=n.target;(o&&o.classList.contains(this._trigger.slice(1))||o.parentElement.classList.contains(this._trigger.slice(1)))&&(o.parentElement.classList.contains(this._trigger.slice(1))&&(o=o.parentElement),q.removeClass(".js-wrapper-modal",["result__info--min_height-380","result__info--min_height-442","result__info--min_height-265"]),s(),e(o),t(o))})}}static addHseMod(e){e.upgrade=function(e){const t=e=>{window.innerHeight-e.clientY<210?this.modal.classList.add("modal--position-top"):this.modal.classList.remove("modal--position-top")};document.addEventListener("click",s=>{let n=s.target;(n&&n.classList.contains(this._trigger.slice(1))||n.parentElement.classList.contains(this._trigger.slice(1)))&&(s.stopPropagation(),q.removeClass(".js-wrapper-modal",["result__info--min_height-380","result__info--min_height-442","result__info--min_height-265"]),e.reset(this.modal.querySelector("#add-hse")),t(s))},!0)}}static editHseMod(e){e.upgrade=function(){document.addEventListener("click",e=>{let t=e.target;(t&&t.classList.contains(this._trigger.slice(1))||t.parentElement.classList.contains(this._trigger.slice(1)))&&(t.parentElement.classList.contains(this._trigger.slice(1))&&(t=t.parentElement),q.removeClass(".js-wrapper-modal",["result__info--min_height-380","result__info--min_height-442","result__info--min_height-265"]),q.addClosestClass(t,".js-wrapper-modal",["result__info--min_height-265"]))}),this._close.addEventListener("click",e=>{q.removeClosestClass(e.target,".js-wrapper-modal",["result__info--min_height-265"])})}}static positionMod(e){e.upgrade=function(){document.querySelectorAll(".js-dropdown__toggle").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),((e,t)=>{document.documentElement.scrollHeight-t.pageY<400?e.nextElementSibling.classList.add("dropdown__options--top-position"):e.nextElementSibling.classList.remove("dropdown__options--top-position")})(e,t)})})}}static accordionParentMod(e){e.upgrade=function(){const e=e=>{document.querySelectorAll(this._triggerSelector).forEach(t=>{t===e.closest(this._triggerSelector)?e.closest(this._triggerSelector).parentElement.classList.toggle("result__row--active"):t.parentElement.classList.remove("result__row--active")})};document.addEventListener("click",t=>{const s=t.target;s&&s.closest(this._triggerSelector)&&e(s)})}}}class G{constructor(e,t,s){this._panelsElements=document.querySelectorAll(e),this._stretchSelector=t,this._activeClass=s,this._init()}_init(){this._stretchHandler()}_stretchHandler(){this._panelsElements.forEach(e=>{let t=e.querySelector(".option-panel__item--stretch");t.addEventListener("click",s=>{s.preventDefault(),this._toggle(e,t)})})}_toggle(e,t){e.closest(this._stretchSelector).classList.toggle(this._activeClass),t.classList.toggle("option-panel__item--stretch-off"),"развернуть"===t.title.toLowerCase()?t.setAttribute("title","Свернуть"):t.setAttribute("title","Развернуть")}}window.addEventListener("DOMContentLoaded",()=>{const e=new l(".dropdown--select",{dropdownToggleSelector:".dropdown__toggle",dropdownOptionsWrapperSelector:".dropdown--select .dropdown__options",dropdownOptionSelector:".dropdown__item"});e.accept(X.positionMod).upgrade();new a(".dropdown--input",{dropdownToggleSelector:".dropdown__toggle",dropdownOptionsWrapperSelector:".dropdown--input .dropdown__options",dropdownOptionSelector:".dropdown__item"});new G(".js-option-panel",".dropdown__options","dropdown__options--stretch"),new n(".js-filter-modal",{modalGroup:"[data-sumbiot-modal-top]",closeClickOverlay:!1}).accept(X.modalsStandardMod).upgrade(),new n(".js-add-user-modal",{modalGroup:"[data-sumbiot-modal-top]",closeClickOverlay:!1}).accept(X.modalsStandardMod).upgrade(),new o(".js-edit-user-modal",{modalSelector:"#edit-user-modal",modalWrapper:".js-wrapper-modal",closeClickOverlay:!1}).accept(X.editUserMod).upgrade(),new o(".js-delete-user-and-card-modal",{modalSelector:"#delete-user-or-card-modal",closeClickOverlay:!1}).accept(X.modalsUnityDeleteMod).upgrade(),new o(".js-edit-card-modal",{modalSelector:"#edit-card-modal",modalWrapper:".js-wrapper-modal",closeClickOverlay:!1}).accept(X.modalsUnityMod).upgrade(),new o(".js-add-hse-modal",{modalSelector:"#add-hse-modal",closeClickOverlay:!1}).accept(X.addHseMod).upgrade(e),new o(".js-edit-hse-modal",{modalSelector:"#edit-hse-modal",modalWrapper:".js-wrapper-modal",closeClickOverlay:!1}).accept(X.editHseMod).upgrade(),new i(".js-accordion",{contentActive:"result__info--active",display:"grid"}).accept(X.accordionParentMod).upgrade(),new _("#add-user",{dropDown:e}),new x("#edit-user",{dropDown:e}),new M("#edit-card"),new O("#delete-user-or-card"),new R("#add-hse"),new R("#edit-hse"),new D("#filter",{dropDown:e}),new F("#search-otipb")})}]);
//# sourceMappingURL=main.js.map